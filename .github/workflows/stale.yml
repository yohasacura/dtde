# Stale Issues and PRs Management
# Automatically marks and closes inactive issues and PRs

name: Stale

on:
  schedule:
    # Run daily at 00:00 UTC
    - cron: '0 0 * * *'
  workflow_dispatch: # Allow manual trigger

permissions:
  issues: write
  pull-requests: write

jobs:
  stale:
    name: Mark Stale Issues and PRs
    runs-on: ubuntu-latest
    steps:
      - uses: actions/stale@v10
        with:
          # Issue settings
          days-before-issue-stale: 60
          days-before-issue-close: 14
          stale-issue-label: 'stale'
          stale-issue-message: |
            This issue has been automatically marked as stale because it has not had recent activity.
            It will be closed in 14 days if no further activity occurs.

            If this issue is still relevant:
            - Add a comment with an update
            - Remove the `stale` label

            Thank you for your contributions! üôè
          close-issue-message: |
            This issue has been automatically closed due to inactivity.

            If you believe this issue is still relevant, please feel free to reopen it or create a new issue with updated information.
          close-issue-label: 'closed-stale'

          # PR settings
          days-before-pr-stale: 30
          days-before-pr-close: 14
          stale-pr-label: 'stale'
          stale-pr-message: |
            This pull request has been automatically marked as stale because it has not had recent activity.
            It will be closed in 14 days if no further activity occurs.

            If this PR is still in progress:
            - Push new commits or add a comment
            - Remove the `stale` label

            Thank you for your contributions! üôè
          close-pr-message: |
            This pull request has been automatically closed due to inactivity.

            If you'd like to continue working on this, please feel free to reopen the PR or create a new one.
          close-pr-label: 'closed-stale'

          # Labels that prevent stale marking
          exempt-issue-labels: 'pinned,security,help-wanted,good-first-issue,in-progress'
          exempt-pr-labels: 'pinned,security,in-progress,do-not-close'

          # Don't mark issues/PRs with milestones as stale
          exempt-all-milestones: true

          # Limit operations per run to avoid rate limiting
          operations-per-run: 50

          # Remove stale label when updated
          remove-stale-when-updated: true

          # Only process issues/PRs in ascending order (oldest first)
          ascending: true
